<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> Arduino Watering System - Signs of Improvement </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="referrer" content="no-referrer">
    <meta name="description" content="" />
    <meta property="og:site_name" content="Signs of Improvement" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://jaredtconnor.com/blog/microcontroller-watering-system/" />
    <meta property="og:title" content="Arduino Watering System" />
    <meta property="og:image" content="https://jaredtconnor.com" />
    <meta property="og:description" content="" />

    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:title" content="Arduino Watering System" />
    <meta name="twitter:description" content="" />
    <meta name="twitter:image" content="https://jaredtconnor.com" />

    <link rel="canonical" href="https://jaredtconnor.com/blog/microcontroller-watering-system/">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous" />

    <link rel="stylesheet" href="https://jaredtconnor.comcss/custom.css" />

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github-gist.min.css" integrity="sha512-od7JLoOTxM8w/HSKGzP9Kexc20K9p/M2zxSWsd7H1e4Ctf+8SQFtCWEZnW5u6ul5ehSECa5QmOk9ju2nQMmlVA==" crossorigin="anonymous" />
    

    

    <link rel="shortcut icon"
        href="https://jaredtconnor.com/images/favicon.png">

    
    <link href="https://jaredtconnor.com/index.xml" rel="alternate" type="application/rss+xml" title="Signs of Improvement" />
    
</head>

<body>
    
<div class="mt-xl header">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-auto">
                <a href="https://jaredtconnor.com">
                    <h1 class="name">Signs of Improvement</h1>
                </a>
            </div>
        </div>

        <div class="row justify-content-center">
            <ul class="nav nav-primary">
                
                <li class="nav-item">
                    <a class="nav-link" href="https://jaredtconnor.com/">
                        
                        Home
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://jaredtconnor.com/about/">
                        
                        About
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/jaredtconnor">
                        
                        GitHub
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://twitter.com/home">
                        
                        Twitter
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

<div class="content">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-sm-12 col-lg-8">
                <h1 class="mx-0 mx-md-4 blog-post-title">Arduino Watering System</h1>

                <div class="mb-md-4 meta">
                    
                    
                    

                    <span class="date middot" title='Wed Jan 15 2020 00:00:00 UTC'>
                        2020-01-15
                    </span>

                    <span class="reading-time middot">
                        5 min read
                    </span>

                    <div class="d-none d-md-inline tags">
                        <ul class="list-unstyled d-inline">
                            
                            <li class="d-inline middot">
                                <a href="https://jaredtconnor.com/tags/microcontrollers">microcontrollers</a>
                            </li>
                            
                            <li class="d-inline middot">
                                <a href="https://jaredtconnor.com/tags/c&#43;&#43;">c&#43;&#43;</a>
                            </li>
                            
                            <li class="d-inline middot">
                                <a href="https://jaredtconnor.com/tags/iot">IOT</a>
                            </li>
                            
                        </ul>
                    </div>
                </div>

                <div class="markdown blog-post-content">
                    
    <p><img src="https://jaredtconnor.com/images/project_images/arduino_project/full_build.png#center" alt="water testing"></p>
<p>It&rsquo;s not often that one gets to program with the physical world, but I must say, this project sparked a newfound appreciation for programming. For a back story, my brother has been playing around with Arduino controllers for a while now. After several projects that blew my mind, I decided to piggyback on his experience to create a project of my own; a self-sustaining watering system for plants. During the summer months in Oregon, I’ve started to enjoy growing my plants, specifically jade. The smell of a fresh jade plant in the early spring morning is something else. Creating a system that could sustainably water this plant seemed interesting, plus, there are a ton of examples online I could reference.</p>
<h1 id="research">Research:</h1>
<p>There were a couple of different ways to build something like this and we discussed most of them.</p>
<ul>
<li>
<p>A <a href="https://circuitdigest.com/microcontroller-projects/arduino-automatic-plant-watering-system">gravity fed watering system</a> option to pump water for a single plant.</p>
</li>
<li>
<p>A <a href="https://www.instructables.com/id/Arduino-Automatic-Watering-System-For-Plants/">sprinkler based system</a> which is interesting.</p>
</li>
<li>
<p>A <a href="https://www.youtube.com/watch?v=O_Q1WKCtWiA">soaker hose watering system</a> based on temperature, UV, and soil moisture level sensors, though this is on the high end of what was needed.</p>
</li>
</ul>
<p>I knew that I wanted to run the system of a pump to be able to scale out to a full planter in the future. You could go with a solenoid activated water value to plumb into a house’s existing water fittings as seen in option 3 which, arguably could be where I take this into the future, but for now the pump will do just fine. With a pump-based system, we can actively water the plant on as-needed bases, just by pumping water into the pot.</p>
<h1 id="requirements">Requirements:</h1>
<ol>
<li>
<p><a href="https://store.arduino.cc/usa/arduino-uno-rev3">Arduino Uno</a>: The flavor of microcontroller you decide to go with is ultimately a personal preference. My brother had an extra Uno laying around, so I used that.</p>
</li>
<li>
<p><a href="https://learn.adafruit.com/adafruit-stemma-soil-sensor-i2c-capacitive-moisture-sensor/python-circuitpython-test">Seesaw Capacitive Soil Sensor</a>: To know when the soil requires water, we need a sensor to quantify the moisture level of the soil. There are two types of soil sensors available 1) a capacitive moisture sensor that senses the soil’s ability to store an electrical charge and a 2) resistive moisture sensor which sends a current through the soil to view the level of resistance. After researching several projects, I’ve read that the resistive sensors are prone to corrosion, so I decided to utilize a capacitive sensor that utilizes the I2C protocol. I2C, a variant of data transfer protocol for controllers, is commonly used for <a href="https://dronebotworkshop.com/i2c-arduino-arduino/">microcontroller sensors</a> and communicating with other objects. There is more info <a href="https://electrosome.com/interfacing-soil-moisture-sensor-arduino/">here</a> if you would like to build this off an analog system.</p>
</li>
<li>
<p>A 12v pump: To eventually pump water to the plant, we need some kind of pump. I decided to go with a <a href="https://www.amazon.com/gp/product/B074MZYS37/ref=ppx_yo_dt_b_asin_title_o07_s00?ie=UTF8&amp;psc=1">Bayite 12v pump</a> to allow for the capacity to add more sensors for more pots or an entire garden watering system. Alternatively, you could likely find a small pump that runs off the micro controller’s power, such as any <a href="https://www.amazon.com/Gikfun-Peristaltic-Connector-Aquarium-Analytic/dp/B01IUVHB8E/ref=sr_1_9?keywords=5v+water+pump&amp;qid=1580185420&amp;sr=8-9">dosing pump</a>, but we decided to go with a more powerful option.</p>
</li>
<li>
<p><a href="https://www.adafruit.com/product/3191">A 5v Relay</a>: By going with a larger pump, power systems come into play. Our pump is running off 5-volt power, whereas the watering pump has auxiliary power at 12-volts. To switch power to the pump on and off, we need a relay to turn on and off based on the moisture reading from the controller.</p>
</li>
</ol>
<h1 id="code">Code:</h1>
<p>The structure of this code is fairly simple. The top is set up to define all variables. Our moisture level is defined based on the <a href="https://learn.adafruit.com/adafruit-stemma-soil-sensor-i2c-capacitive-moisture-sensor/overview">range</a> provided by the sensor docs. The <code>setup()</code> block is meant to initialize our serial output and then confirm if the sensor is providing input. The main <code>loop()</code> block should be considered analogous to a <code>main()</code> function in C++ programming.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#00f">#include</span> <span style="color:#00f">&#34;Adafruit_seesaw.h&#34;</span><span style="color:#00f">
</span><span style="color:#00f"></span>
Adafruit_seesaw ss;

<span style="color:#008000">// Defining constant variables
</span><span style="color:#008000"></span><span style="color:#00f">const</span> <span style="color:#2b91af">int</span> pumpPin = 3;
<span style="color:#00f">const</span> <span style="color:#2b91af">int</span> ledPin = 12; 
<span style="color:#00f">const</span> <span style="color:#2b91af">int</span> moisture_level = 750; 

<span style="color:#008000">// Defining other variables
</span><span style="color:#008000"></span><span style="color:#2b91af">int</span> pumpPower = LOW;    <span style="color:#008000">// Preset pump power to off
</span><span style="color:#008000"></span><span style="color:#2b91af">int</span> ledPower = LOW;     <span style="color:#008000">// Preset LED power to off
</span><span style="color:#008000"></span><span style="color:#2b91af">long</span> watering_time = 5000;    <span style="color:#008000">// amount of time pump will water (1 sec = 1000 ms)
</span><span style="color:#008000"></span>

<span style="color:#2b91af">void</span> setup() {

  Serial.begin(115200);

  Serial.println(<span style="color:#a31515">&#34;################### Soil Sensor v.2.0 ###################&#34;</span>);

  <span style="color:#008000">// Detect to see if soil sensor is available
</span><span style="color:#008000"></span>  <span style="color:#00f">if</span> (!ss.begin(0x36)) {
    Serial.println(<span style="color:#a31515">&#34;ERROR! seesaw not found&#34;</span>);
    <span style="color:#00f">while</span>(1);
  } <span style="color:#00f">else</span> {
    Serial.print(<span style="color:#a31515">&#34;seesaw started! version: &#34;</span>);
    Serial.println(ss.getVersion(), HEX);
  }

  <span style="color:#008000">// Initializing Output Pins
</span><span style="color:#008000"></span>  pinMode(pumpPin, OUTPUT);
  pinMode(ledPin, OUTPUT);

}


<span style="color:#2b91af">void</span> loop() {

  <span style="color:#008000">// Read the capacitive soil sensor to get moisture reading (200: very dry | 2000: very wet)
</span><span style="color:#008000"></span>  <span style="color:#2b91af">float</span> tempC = ss.getTemp();
  <span style="color:#2b91af">uint16_t</span> capread = ss.touchRead(0);

  <span style="color:#008000">// Printing out the current moisture
</span><span style="color:#008000"></span>  Serial.print(<span style="color:#a31515">&#34;Temperature: &#34;</span>); Serial.print(tempC); Serial.println(<span style="color:#a31515">&#34;*C&#34;</span>);
  Serial.print(<span style="color:#a31515">&#34;Capacitive: &#34;</span>); 
  Serial.println(capread);

  <span style="color:#008000">// Conditional block to water the plant if the moisture level is too low
</span><span style="color:#008000"></span>  <span style="color:#00f">if</span>(capread &lt;= moisture_level){
    Serial.println(<span style="color:#a31515">&#34;Moisture below threshold&#34;</span>);
    
      digitalWrite(pumpPin, HIGH);
      digitalWrite(ledPin, LOW);

      delay(5000);

      digitalWrite(pumpPin, LOW);
      digitalWrite(ledPin, HIGH);

     } <span style="color:#00f">else</span> {
      digitalWrite(pumpPin, LOW);
      digitalWrite(ledPin, HIGH);
     }
 
  delay(300000); 
  <span style="color:#008000">// 5 Mins = 300000
</span><span style="color:#008000"></span>}</code></pre></div>
<h1 id="pictures">Pictures:</h1>
<p><img src="https://jaredtconnor.com/images/project_images/arduino_project/box.png#center" alt="Pump in box"></p>
<p><img src="https://jaredtconnor.com/images/project_images/arduino_project/pump.png#center" alt="Bayite Pump"></p>
<p><img src="https://jaredtconnor.com/images/project_images/arduino_project/uno_detail.png#center" alt="Board Detail"></p>
<p><img src="https://jaredtconnor.com/images/project_images/arduino_project/mock_build.png#center" alt="Mock Build"></p>
<p><img src="https://jaredtconnor.com/images/project_images/arduino_project/testing.png#center" alt="Soil testing"></p>
<p>For an update, I will provide pictures in the spring once the jade plant begins to bloom. In terms of improvements towards this project, I would like to explore the use of a logging system. An <a href="https://startingelectronics.org/software/arduino/web-server/01-log-data/">SD card logging</a> system appears to be possible, or Adafruit just released a <a href="https://io.adafruit.com/">graphical UI</a> called <em>Adafruit IO</em>. <a href="https://aws.amazon.com/iot-things-graph/">AWS</a> also provides an IoT system that allows for controller integrations, but again we would need to incorporate some GSM, Bluetooth, or WiFi shield for this system.</p>



                </div>

                
            </div>
        </div>
    </div>
</div>

<section id="comments">
    <div class="py-3 content">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-sm-12 col-lg-8">
                    <div class="comments">
                        <script src="https://utteranc.es/client.js" repo=""
                            issue-term="pathname" label="comment" theme="github-light" crossorigin="anonymous" async>
                            </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



    

    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js" defer></script>
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/python.min.js" defer></script>
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/stan.min.js" defer></script>
        
        <script>
            window.addEventListener('load', function() {
                hljs.initHighlighting();
            }, true);
        </script>
    

    

    
    
        

    
</body>

</html>
